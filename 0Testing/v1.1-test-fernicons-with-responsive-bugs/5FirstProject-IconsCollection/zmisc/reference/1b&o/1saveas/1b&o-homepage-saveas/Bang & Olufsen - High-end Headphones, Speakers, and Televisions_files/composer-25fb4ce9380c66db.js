(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9045],{65050:function(e,o,t){"use strict";var n=t(41408).ZP.div.withConfig({componentId:"sc-2vbw0x-0"})(["width:100dvw;height:100dvh;display:flex;justify-content:center;align-items:center;overflow:hidden;"]);o.Z=n},87703:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return k}});var n=t(90849),a=t(11246),r=t(31099),c=t(27378),i=t(86677),l=t(62557),u=t(21318),s=t(50813),d=t(65050),p=t(48787),v=t(51746),g=t(3514),f=t(34051),m=t(97247),h=(0,f.fromJS)({}),w=function(e,o){return e.set("composerPageData",(0,f.fromJS)(o.data))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,o=arguments.length>1?arguments[1]:void 0;return o.type===m.Um?w(e,o):e},y=t(31007),C=t(24246);function P(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?P(Object(t),!0).forEach((function(o){(0,n.Z)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var k=(0,l.Z)((function(e){var o=e.country,t=e.language,n=e.threediumSiteUrl,l=e.pageQuery,v=e.saveComposerEventAction,f=e.pageData,m=(0,c.useRef)(null),h=(0,i.useRouter)(),w=null===l||void 0===l?void 0:l.get("page"),b=null===l||void 0===l?void 0:l.get("slug"),y=null===l||void 0===l?void 0:l.get("composition"),P=null===l||void 0===l?void 0:l.get("tid"),k=null===l||void 0===l?void 0:l.get("ttiid"),j=null===l||void 0===l?void 0:l.get("origin"),I=null===l||void 0===l?void 0:l.get("name"),D="productselection"===(null===w||void 0===w?void 0:w.toLowerCase())?"/product":"",S="productselection"===(null===w||void 0===w?void 0:w.toLowerCase())?"productselection":null,E=function(){if(m.current){var e=window.location.href;m.current.contentWindow.postMessage({eventName:"CurrentNavigationUrl",source:"site",url:{parentUrl:e}},"*")}};(0,c.useEffect)((function(){return h.events.on("routeChangeComplete",E),function(){h.events.off("routeChangeComplete",E)}}),[h]),(0,c.useEffect)((function(){var e=function(e){var n=e.data,a=n.page,r=n.productPath,c=n.target,i=n.eventName,l=n.composition,s=n.source,d=n.compositionDrafts,g=n.data,f=l||{id:null,tid:null,ttiid:null,name:null},C=f.id,O={beoId:null,event:i,productPath:r||null,page:a||null,source:s,target:c,status:null,tId:f.tid,ttiId:f.ttiid,compositionDrafts:d||null,compositionId:C||null,name:f.name||null},D=(0,p.Pc)();switch(a){case"Landing":h.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/composer"),void 0,{shallow:!0}),v(O);break;case"BeoHome":h.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase()),void 0,{shallow:!0}),v(O);break;case"ProductSelection":h.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/composer?page=productselection"),void 0,{shallow:!0}),v(O);break;case"ProductOverview":h.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/composer/product/").concat(r),void 0,{shallow:!0}),v(O);break;case"ViewProductPage":window.open("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase()).concat(r),c),v(O);break;default:console.log("Unhandled page event :".concat(a))}switch(i){case"MyAccount":D?(h.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/my-account/my-compositions")),v(O)):((0,p.t_)("fromComposer","true"),h.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/login")),v(O));break;case"SaveComposition":case"Share":case"Download":v(O);break;case"BookAStoreVisit":h.push("/".concat(t,"/checkout?step=postcode&flow=composerbookademo")),v(O);break;case"GTM":(0,u.q8)(g);break;case"IframeLoaded":!function(){if(m.current){var e={eventName:"IframeAttributes",source:"site",locale:t,country:o,productSlug:b||null,page:w||null,origin:j||null,composition:{id:y||null,name:I||null,tid:P||null,ttiid:k||null}};m.current.contentWindow.postMessage(e,"*")}}();break;default:console.log("Unhandled event :".concat(i))}};window.addEventListener("message",e);var n=(0,u.v8)({pageType:s.c3X,pageName:s.c3X});return(0,u.q8)(n),function(){window.removeEventListener("message",e)}}),[]);return(0,C.jsxs)(C.Fragment,{children:[function(){var e=f&&f.get("seo"),t=(0,p.Kc)(e,h),n=null===e||void 0===e?void 0:e.toJS(),c=null===e||void 0===e?void 0:e.getIn(["page","title"]),i=null===e||void 0===e?void 0:e.get("page"),l=(null===i||void 0===i?void 0:i.toJS())||{},u=(0,r.Z)({},l),s=(n||{}).includeNoIndexForLocalesAndCountries,d=(void 0===s?[]:s).some((function(e){return e.alpha2Code===o}));if(t){var v=(0,a.Z)(t,2),m=v[0],w=v[1];return(0,C.jsx)(g.Z,O(O(O({},m),u),{},{schemas:w.schemaInfo,includeNoIndexMetaTag:d,title:c}))}return null}(),(0,C.jsx)("div",{className:"active",children:(0,C.jsx)(d.Z,{children:(0,C.jsx)("iframe",{ref:m,src:"".concat(n).concat(D,"?locale=").concat(t,"&country=").concat(o),style:{width:"100%",height:"100%",border:"none"},title:"Composer",allow:"fullscreen; clipboard-read; clipboard-write","data-page":S,"data-locale":t,"data-country":o})})})]})}),{key:"ComposerPage",mapStateToProps:function(e){return{country:e.getIn(["global","globalData","country"]),language:e.getIn(["global","globalData","userlanguage"]),pageQuery:e.getIn(["global","globalData","pageQuery"]),threediumSiteUrl:e.getIn(["global","header","loginAPI","threediumSiteUrl"]),pageData:e.getIn(["ComposerPage","composerPageData"])}},mapDispatchToProps:function(e){return{saveComposerEventAction:function(o){return e((0,v.E4)(o))}}},initialActions:v.ZP,useQuery:!0,reducer:b,saga:y.Z})},15889:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[language]/[country]/composer",function(){return t(87703)}])}},function(e){e.O(0,[9774,2888,179],(function(){return o=15889,e(e.s=o);var o}));var o=e.O();_N_E=o}]);